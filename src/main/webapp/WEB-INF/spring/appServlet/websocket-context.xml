<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
	xmlns="http://www.springframework.org/schema/mvc"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:beans="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:websocket="http://www.springframework.org/schema/websocket"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/mvc
						https://www.springframework.org/schema/mvc/spring-mvc.xsd
						http://www.springframework.org/schema/beans
						https://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/context
						https://www.springframework.org/schema/context/spring-context.xsd
						http://www.springframework.org/schema/websocket
       					http://www.springframework.org/schema/websocket/spring-websocket.xsd
       					http://www.springframework.org/schema/tx
       					http://www.springframework.org/schema/tx/spring-tx.xsd">



	<context:component-scan base-package="kr.or.ns.*" />
	<beans:bean id="messageSocket"
		class="kr.or.ns.websocket.MessageHandler" />
	<websocket:handlers>
		<!--웹소켓 클라이언트가 /test01.htm으로 접속하면 test01라는 bean으로 처리('test01'에 설정한 클래스 
			경로는 웹소켓을 구현한 클래스 -->
		<websocket:mapping handler="messageSocket"
			path="/messageSocket.do" />
		<!-- WebSocketHandler 를 구현한 클래스 안에서는 HttpServletRequest 등의 서블릿 관련 클래스를 
			사용할 수 없음!! 그래서 WebSocketHandler보다 앞서 실행되는 websocket:HandshakeInterceptor를 
			이용하여 이용자의 HttpSession에 접속하고 세션에 저장된 내용을 WebSocketHandler로 전달 -->
		<!-- <websocket:handshake-interceptors> <bean class="kr.or.ns.interceptor.HandShakeInterceptor"/> 
			</websocket:handshake-interceptors> -->
	</websocket:handlers>
	<default-servlet-handler />
	<!-- class : 웹소켓을 구현할 클래스 경로 -->


	<beans:bean
		class="org.springframework.web.socket.server.standard.ServletServerContainerFactoryBean">
		<beans:property name="maxTextMessageBufferSize"
			value="8192" />
		<beans:property name="maxBinaryMessageBufferSize"
			value="819200" />
	</beans:bean>
</beans:beans>
