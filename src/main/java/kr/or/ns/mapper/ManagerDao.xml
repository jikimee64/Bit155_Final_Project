<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.ns.dao.ManagerDao">

	<!-- 총 스터디게시글 수 -->
	<!-- <select id="getMemberCount" resultType="Integer"> -->
	<!-- SELECT COUNT(*) FROM 멤버보드_BOARD -->
	<!-- </select> -->

	<!-- 회원리스트 가져오기 -->
	<select id="getMemberList" resultType="kr.or.ns.vo.Users">
<!-- 	<select id="getMemberList" resultType="hashmap"> -->
		SELECT * FROM USERS
		ORDER BY user_id asc
	</select>


	<!-- 회원 상세정보가져오기 -->
	<select id="getUsers" resultType="kr.or.ns.vo.Users">
		select * from users where
		user_id=#{user_id}
	</select>


	<!-- 회원상세보기할때 회원 실력 가져오기 -->
	<select id="getSkill" resultType="hashmap">
		select skill_name, skill_level
		from skill where user_id=#{user_id}
	</select>

	<!-- 멤버 삭제하기 -->
	<delete id="memberDelete">
		DELETE from users WHERE user_id=#{user_id}
	</delete>


	<!-- public List<Blame> getBlameList(String bl_seq); -->
	<!-- 신고게시판 목록 뿌려주기 -->
	<select id="getBlameList" resultType="hashmap">
<!-- 		SELECT * FROM blame_board -->
<!-- 		ORDER -->
<!-- 		BY BL_SEQ asc -->
		select *
		from blame_board b
		join blame_type_category t
		on b.BTC_SEQ = t.BTC_SEQ
		join blame_place_category p
		on b.BPC_SEQ = p.BPC_SEQ
	</select>
	
	<update id="stopMember">
		update users set enabled = 0 where user_id=#{user_id}
	</update>
	
	<update id="restoreMember">
		update users set enabled = 1 where user_id=#{user_id}
	</update>
	
	<select id="getDetailDeclare" resultType="hashmap">
		select *
		from blame_board b
		join blame_type_category t
		on b.BTC_SEQ = t.BTC_SEQ
		join blame_place_category p
		on b.BPC_SEQ = p.BPC_SEQ
		where BL_SEQ = #{BL_SEQ}
	</select>
	
	
	<update id="blameYes">
		update blame_board
		set bl_status = '처리완료'
		where bl_seq = #{bl_seq}
	</update>

	<!-- blameYes와 트랜잭션 묶음  -->
	<update id="blameTargetUp">
		update users
		set blame_count = blame_count + 1
		where user_id = #{user_id}
	</update>
	
	<update id="blameNo">
		update blame_board
		set bl_status = '처리취소'
		where bl_seq = #{bl_seq}
	</update>
	
	<select id="messageGet" resultType="hashmap">
		select *
		from message
		where m_seq = #{m_seq}
	</select>
	

</mapper>